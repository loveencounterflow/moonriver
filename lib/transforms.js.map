{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/transforms.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n############################################################################################################\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'MOONRIVER/TRANSFORMS'\n{ rpr\n  inspect\n  echo\n  log     }               = GUY.trm\n#...........................................................................................................\n{ get_transform_types\n  misfit                } = require './types'\n# { Transformer }           = require './transformer'\n\n\n#-----------------------------------------------------------------------------------------------------------\n@$window = ( cfg, transform = null ) =>\n  return @_$window cfg unless transform\n  # @types.validate.function f\n  { Pipeline } = require './main'\n  R = new Pipeline()\n  R.push @_$window cfg\n  R.push transform\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@_$window = ( cfg ) =>\n  cfg           = get_transform_types().create.transform_window_cfg cfg\n  { min\n    max\n    empty }     = cfg\n  { $ }         = require './main'\n  stop          = Symbol 'stop'\n  buffer        = []\n  idxs          = [ min .. max ]\n  zero_idx      = idxs.indexOf 0\n  if zero_idx < 0\n    throw new Error \"^transforms.window^ index 0 missing with settings #{rpr { min, max, }}\"\n  buffer.push empty for nr in idxs\n  advance       = => buffer.splice 0, 1\n  #.........................................................................................................\n  return $ { stop, }, window = ( d, send ) =>\n    if d is stop\n      loop\n        advance()\n        buffer.push empty\n        ### TAINT incorrect condition ###\n        break if buffer[ zero_idx ] is empty\n        send [ buffer..., ]\n      return null\n    advance()\n    buffer.push d\n    send [ buffer..., ] unless buffer[ zero_idx ] is empty\n\n#-----------------------------------------------------------------------------------------------------------\n@$split_lines = =>\n  SL  = require 'intertext-splitlines'\n  ctx = SL.new_context()\n  return split_lines = ( d, send ) =>\n    for line from SL.walk_lines ctx, d\n      send line\n    return null\n\n#-----------------------------------------------------------------------------------------------------------\n@$limit = ( n ) =>\n  count = 0\n  return limit = ( d, send ) =>\n    return null if count >= n\n    count++\n    send d\n    return null\n\n#-----------------------------------------------------------------------------------------------------------\n@$collect = ( collector = [] ) =>\n  { $ }         = require './main'\n  stop          = Symbol 'stop'\n  return $ { stop, }, collect = ( d, send ) =>\n    return send collector if d is stop\n    collector.push d\n    return null\n\n#-----------------------------------------------------------------------------------------------------------\n@$map       = ( f, P... ) => ( d, send ) => send        f P...\n@$async_map = ( f, P... ) => ( d, send ) => send await  f P...\n\n\n\n\n"
  ]
}